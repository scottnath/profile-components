{"version":3,"file":"repository.stories-906506e0.js","sources":["../../src/github/repository.shared-spec.js"],"sourcesContent":["import { expect } from '@storybook/jest';\nimport { within as shadowWithin } from 'shadow-dom-testing-library';\n\n/**\n * Extract elements from an shadow DOM element\n */\nexport const getElements = async (canvasElement) => {\n  const screen = shadowWithin(canvasElement);\n  const container = await screen.findByShadowRole('complementary');\n  const link = await screen.queryByShadowRole('link');\n  const langDetails = await container?.querySelector('[itemprop=\"programmingLanguage\"]');\n  const langTerm = await langDetails?.previousElementSibling;\n  return { \n    screen,\n    canvasElement,\n    container,\n    link,\n    error: await container?.querySelector('[itemprop=\"error\"]'),\n    org: await container?.querySelector('[itemprop=\"maintainer\"]'),\n    name: await container?.querySelector('[itemprop=\"name\"]'),\n    description: await container?.querySelector('[itemprop=\"about\"]'),\n    langDetails,\n    langTerm,\n  };\n}\n\n/**\n * Ensure elements are present and have the correct content\n */\nexport const ensureElements = async (elements, args) => {\n  if (args.error) {\n    await expect(elements.link).toBeFalsy();\n    await expect(elements.container).toBeTruthy();\n    await expect(elements.error).toBeTruthy();\n    await expect(elements.error).toHaveTextContent(args.error);\n    return;\n  }\n  if (!args.full_name) {\n    await expect(elements.link).toBeFalsy();\n    await expect(elements.container).toBeTruthy();\n    await expect(elements.container).toHaveTextContent('Missing repo attribute: `full_name`');\n    return;\n  }\n  /** full_name split into an array */\n  const full_nameSplit = args.full_name.split('/');\n\n  await expect(elements.link).toBeTruthy();\n  await expect(elements.container).toBeTruthy();\n  await expect(elements.name).toBeTruthy();\n  if (args?.name) {\n    await expect(elements.name).toHaveTextContent(args.name);\n  } else {\n    await expect(elements.name).toHaveTextContent(full_nameSplit[1]);\n  }\n\n  /** org from args or derived from full_nameSplit */\n  const org = args?.org ? args.org : full_nameSplit[1] ? full_nameSplit[0] : null;\n  if (!org || (org && org === args.user_login)) {\n    await expect(elements.org).toBeFalsy();\n  } else {\n    await expect(elements.org).toBeTruthy();\n    await expect(elements.org).toHaveTextContent(org);\n  }\n  \n  if (args?.description) {\n    await expect(elements.description).toBeTruthy();\n    await expect(elements.description).toHaveTextContent(args.description);\n  } else {\n    await expect(elements.description).toBeFalsy();\n  }\n  if (args?.language) {\n    await expect(elements.langDetails).toBeTruthy();\n    await expect(elements.langTerm).toBeTruthy();\n  } else {\n    await expect(elements.langDetails).toBeFalsy();\n    await expect(elements.langTerm).toBeFalsy();\n  }\n}"],"names":["getElements","canvasElement","screen","shadowWithin","container","link","langDetails","langTerm","ensureElements","elements","args","expect","full_nameSplit","org"],"mappings":"ivZAMaA,EAAc,MAAOC,GAAkB,CAClD,MAAMC,EAASC,EAAaF,CAAa,EACnCG,EAAY,MAAMF,EAAO,iBAAiB,eAAe,EACzDG,EAAO,MAAMH,EAAO,kBAAkB,MAAM,EAC5CI,EAAc,MAAMF,GAAA,YAAAA,EAAW,cAAc,qCAC7CG,EAAW,MAAMD,GAAA,YAAAA,EAAa,wBACpC,MAAO,CACL,OAAAJ,EACA,cAAAD,EACA,UAAAG,EACA,KAAAC,EACA,MAAO,MAAMD,GAAA,YAAAA,EAAW,cAAc,uBACtC,IAAK,MAAMA,GAAA,YAAAA,EAAW,cAAc,4BACpC,KAAM,MAAMA,GAAA,YAAAA,EAAW,cAAc,sBACrC,YAAa,MAAMA,GAAA,YAAAA,EAAW,cAAc,uBAC5C,YAAAE,EACA,SAAAC,CACJ,CACA,EAKaC,EAAiB,MAAOC,EAAUC,IAAS,CACtD,GAAIA,EAAK,MAAO,CACd,MAAMC,EAAOF,EAAS,IAAI,EAAE,UAAS,EACrC,MAAME,EAAOF,EAAS,SAAS,EAAE,WAAU,EAC3C,MAAME,EAAOF,EAAS,KAAK,EAAE,WAAU,EACvC,MAAME,EAAOF,EAAS,KAAK,EAAE,kBAAkBC,EAAK,KAAK,EACzD,MACD,CACD,GAAI,CAACA,EAAK,UAAW,CACnB,MAAMC,EAAOF,EAAS,IAAI,EAAE,UAAS,EACrC,MAAME,EAAOF,EAAS,SAAS,EAAE,WAAU,EAC3C,MAAME,EAAOF,EAAS,SAAS,EAAE,kBAAkB,qCAAqC,EACxF,MACD,CAED,MAAMG,EAAiBF,EAAK,UAAU,MAAM,GAAG,EAE/C,MAAMC,EAAOF,EAAS,IAAI,EAAE,WAAU,EACtC,MAAME,EAAOF,EAAS,SAAS,EAAE,WAAU,EAC3C,MAAME,EAAOF,EAAS,IAAI,EAAE,WAAU,EAClCC,GAAA,MAAAA,EAAM,KACR,MAAMC,EAAOF,EAAS,IAAI,EAAE,kBAAkBC,EAAK,IAAI,EAEvD,MAAMC,EAAOF,EAAS,IAAI,EAAE,kBAAkBG,EAAe,CAAC,CAAC,EAIjE,MAAMC,EAAMH,GAAA,MAAAA,EAAM,IAAMA,EAAK,IAAME,EAAe,CAAC,EAAIA,EAAe,CAAC,EAAI,KACvE,CAACC,GAAQA,GAAOA,IAAQH,EAAK,WAC/B,MAAMC,EAAOF,EAAS,GAAG,EAAE,UAAS,GAEpC,MAAME,EAAOF,EAAS,GAAG,EAAE,WAAU,EACrC,MAAME,EAAOF,EAAS,GAAG,EAAE,kBAAkBI,CAAG,GAG9CH,GAAA,MAAAA,EAAM,aACR,MAAMC,EAAOF,EAAS,WAAW,EAAE,WAAU,EAC7C,MAAME,EAAOF,EAAS,WAAW,EAAE,kBAAkBC,EAAK,WAAW,GAErE,MAAMC,EAAOF,EAAS,WAAW,EAAE,UAAS,EAE1CC,GAAA,MAAAA,EAAM,UACR,MAAMC,EAAOF,EAAS,WAAW,EAAE,WAAU,EAC7C,MAAME,EAAOF,EAAS,QAAQ,EAAE,WAAU,IAE1C,MAAME,EAAOF,EAAS,WAAW,EAAE,UAAS,EAC5C,MAAME,EAAOF,EAAS,QAAQ,EAAE,UAAS,EAE7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}